#include <LiquidCrystal.h>

const int rs = 12, en = 11, d4 = 5, d5 = 4, d6 = 3, d7 = 2;

LiquidCrystal lcd(rs, en, d4, d5, d6, d7);

const int busPins[] = {52, 50, 48, 46, 44, 42, 40, 38, 36};
const int numPins = sizeof(busPins) / sizeof(busPins[0]);

void setup() {
  // LCD starten
  lcd.begin(16, 2);
  lcd.print("Bus Value:");

  // Buspins als Input setzen
  for (int i = 0; i < numPins; i++) {
    pinMode(busPins[i], INPUT);
  }
}

void loop() {
  unsigned int value = 0;

  // Bits einlesen: busPins[0] = MSB (Pin 52), busPins[last] = LSB (Pin 36)
  for (int i = 0; i < numPins; i++) {
    int bitValue = digitalRead(busPins[i]);
    value = (value << 1) | (bitValue & 1);
  }

  // Zahl als String
  String s = String((value/256)*100);

  // Auf LCD anzeigen
  lcd.setCursor(0, 1);
  lcd.print("                "); // alte Zeile lÃ¶schen
  lcd.setCursor(0, 1);
  lcd.print(s + "%");

  delay(200);
}
